# SiteProbe テストレビュー（テスト担当）

## 1. テスト戦略の提案

### 1.1 ユニットテスト

#### テスト対象と優先度

| 対象 | 優先度 | テスト観点 |
|------|--------|-----------|
| ペルソナプロンプト生成ロジック | 高 | 16種のデフォルトペルソナが正しいプロンプトを生成するか。カスタムペルソナの入力がプロンプトに正しく反映されるか |
| データ変換層（スクレイピング結果 → AI入力） | 高 | HTML/CSS/メタデータの抽出・正規化が正しく行われるか。不正なHTML入力でもクラッシュしないか |
| ストレージ層（localStorage抽象化） | 高 | CRUD操作の正確性。データのシリアライズ/デシリアライズが正しく行われるか |
| スコア算出ロジック | 高 | 総合スコア（100点満点）の算出が正しいか。カテゴリ別スコアの集計が正確か |
| 優先度判定ロジック | 中 | 改善提案の優先度（高/中/低）の判定が期待通りか |
| URL バリデーション | 中 | 有効・無効なURLの判定が正しいか |
| プログレス計算 | 中 | 全体進捗率の計算（例: 3/8 = 37.5%）が正しいか |
| PDF/JSONエクスポート変換 | 中 | 分析結果データが正しいフォーマットに変換されるか |
| 共有URL生成（Base64エンコード） | 中 | データのエンコード/デコードの正確性。URLセーフな文字列が生成されるか |
| ペルソナCRUD操作 | 中 | 作成・読取・更新・削除の各操作が正しく動作するか |
| 経過時間計算 | 低 | タイマーの開始・停止・表示フォーマットが正しいか |

#### ユニットテスト方針
- 純粋関数を優先的にテストし、副作用のあるロジックはモック化して分離する
- 各ペルソナのプロンプトテンプレートには、期待されるキーワード・構造のスナップショットテストを適用する
- データ変換層は、既知のHTML入力に対する期待出力をフィクスチャとして管理する

### 1.2 統合テスト

#### テスト対象パイプライン

| パイプライン | テスト範囲 | テスト内容 |
|-------------|-----------|-----------|
| URL入力 → スクレイピング → データ正規化 | フロント〜API | URL受付からHTML取得・解析までの一連のフロー |
| データ正規化 → Gemini API呼び出し → 結果パース | API〜AI | 正規化データがAIに正しく渡り、レスポンスが正しくパースされるか |
| 複数ペルソナ並列実行 | API | 複数ペルソナが並列で実行され、全結果が正しく集約されるか |
| 分析結果 → ストレージ保存 → 履歴表示 | API〜フロント | 結果保存と履歴一覧の整合性 |
| 分析結果 → PDF/JSONエクスポート | API | エクスポートファイルの内容が分析結果と一致するか |
| 分析結果 → 共有URL生成 → 共有ページ表示 | フロント〜API | 共有URLからの結果復元が正しく行われるか |
| ペルソナCRUD → 分析への反映 | フロント〜API | カスタムペルソナの変更が次回分析に正しく反映されるか |

#### 統合テスト方針
- Gemini APIはモックサーバーを使用し、固定レスポンスでテストする
- スクレイピングは実際のHTTPリクエストではなく、固定HTMLフィクスチャを使用する
- 並列実行テストではタイミング依存の問題を検出するため、遅延シミュレーションを含める

### 1.3 E2Eテスト

#### ユーザーシナリオテスト

| シナリオID | ユーザーストーリー | テスト内容 |
|-----------|------------------|-----------|
| E2E-001 | US-001: URL入力して分析開始 | URLを入力 → 分析開始ボタン押下 → 分析が開始されることを確認 |
| E2E-002 | US-002: プログレスバー表示 | 分析中に全体進捗バーと個別ペルソナ状態が正しく表示・更新されるか |
| E2E-003 | US-003: タブ切り替え | 各ペルソナの分析結果がタブで切り替え表示できるか |
| E2E-004 | US-004: 改善提案の閲覧 | 改善提案が優先度順に表示され、具体的な内容を含むか |
| E2E-005 | US-005: カスタムペルソナ作成 | ペルソナ管理画面で新規ペルソナを作成し、分析に反映されるか |
| E2E-006 | US-006: ペルソナ無効化 | デフォルトペルソナを無効化すると、分析対象から除外されるか |
| E2E-007 | US-007: 分析履歴の閲覧 | 過去の分析結果が履歴一覧に表示され、詳細を閲覧できるか |
| E2E-008 | US-008: エクスポート | PDF/JSONでのエクスポートが正常にダウンロードされるか |
| E2E-009 | US-009: 共有URL | 共有URLを生成し、そのURLから分析結果が閲覧できるか |
| E2E-010 | US-010: 分析過程表示 | 分析過程タブで各ペルソナの思考プロセスが表示されるか |
| E2E-011 | US-012: 履歴からの閲覧 | 履歴一覧から過去の結果を選択し、完全に表示されるか |

#### E2Eテスト方針
- 実際のGemini APIを使うケースと、モックAPIを使うケースの2種類を用意する
- CIでは高速なモックAPIテストを実行し、手動QAで実API確認を行う
- レスポンシブ対応のため、デスクトップ（1280x720）とモバイル（375x812）の2ビューポートでテストする

---

## 2. テスタビリティの評価

### 2.1 Gemini API のモック方式

#### 推奨方式: MSW（Mock Service Worker） + カスタムモックファクトリ

```
テスト実行時の構成:
  ユニットテスト → vi.mock() でモジュールレベルモック
  統合テスト → MSW でHTTPレベルモック
  E2Eテスト → MSW のサービスワーカーモード or テスト用APIエンドポイント
```

#### 具体的な設計提案

1. **AIクライアントの抽象化が必須**: Gemini APIへの直接依存を避け、`AnalysisService` インターフェースを定義する。これにより、テスト時にモック実装への差し替えが容易になる
2. **レスポンスフィクスチャ**: 各ペルソナの典型的なAIレスポンスをJSON形式でフィクスチャ化する。正常系・異常系（レート制限、タイムアウト、不正レスポンス）を網羅する
3. **ストリーミングのモック**: F-004（ストリーミング表示）のテストでは、チャンク分割されたレスポンスをシミュレーションする必要がある。MSWのストリーミングレスポンスハンドラを活用する

#### テスタビリティ上の懸念
- **要件定義への提案**: AIクライアント層の抽象化（インターフェース定義）を設計段階で明示的に盛り込むべき。直接Gemini SDKを呼ぶ実装だとモック化が困難になる
- **プロンプトのバージョン管理**: ペルソナプロンプトの変更時にAIレスポンスの品質が変わるため、プロンプトバージョンと期待結果の対応を管理する仕組みが必要

### 2.2 スクレイピング結果のモック方式

#### 推奨方式: HTMLフィクスチャ + MSW

1. **HTMLフィクスチャの管理**: 代表的なサイト構造（SPA、SSR、静的HTML、WordPressなど）のHTMLスナップショットをテストフィクスチャとして保存する
2. **フェッチのモック**: MSWで `fetch` リクエストをインターセプトし、フィクスチャHTMLを返却する
3. **cheerio解析のテスト**: 実際のcheerioパーサーを使い、フィクスチャHTMLから期待するメタデータ・構造が抽出されることを検証する

#### テスタビリティ上の懸念
- **スクレイピング対象の多様性**: 実際のWebサイトは構造が多様であり、フィクスチャだけではカバーしきれない。定期的に実サイトでのスモークテストを行う運用が必要
- **Lighthouse指標の取得**: Lighthouse指標のテスト方法が未定義。サーバーレス環境でLighthouseを実行する場合、テスト環境の構築が課題となる

### 2.3 localStorage のテスト方式

#### 推奨方式: ストレージアダプターパターン

1. **ストレージ抽象化**: `StorageAdapter` インターフェースを定義し、`LocalStorageAdapter` と `InMemoryStorageAdapter`（テスト用）を実装する
2. **jsdom環境**: Vitestのjsdom環境でlocalStorageのネイティブ実装を利用する
3. **データ量テスト**: localStorageの容量制限（通常5MB）に近いデータ量でのテストを含める

#### テスタビリティ上の懸念
- **要件定義への提案**: ストレージ層の抽象化（アダプターパターン）を設計に盛り込むべき。将来のSupabase移行時にもテストコードの変更が最小限になる
- **データマイグレーション**: localStorage → Supabase移行時のデータマイグレーションテスト計画が未定義

---

## 3. 品質基準の定義

### 3.1 カバレッジ目標

| テストレベル | カバレッジ目標 | 備考 |
|-------------|-------------|------|
| ユニットテスト（全体） | 80%以上 | ステートメントカバレッジ |
| クリティカルパス | 100% | スコア算出、プロンプト生成、データ変換、ストレージCRUD |
| 新規コード | 90%以上 | PRマージ基準 |
| 統合テスト | 主要パイプライン全網羅 | 上記7パイプラインすべて |
| E2Eテスト | 全ユーザーストーリー網羅 | 上記11シナリオすべて |

### 3.2 パフォーマンス基準

| 指標 | 基準値 | 測定方法 |
|------|--------|---------|
| プログレスバー更新頻度 | 1秒以内の反映 | ペルソナ完了イベント発火から画面反映までの遅延を計測 |
| 初回描画（FCP） | 1.8秒以下 | Lighthouse |
| 最大コンテンツ描画（LCP） | 2.5秒以下 | Lighthouse |
| レイアウトシフト（CLS） | 0.1以下 | Lighthouse |
| タブ切り替え応答 | 100ms以下 | ユーザー操作からDOM更新までの時間 |
| 分析結果ストリーミング開始 | 3秒以内 | 分析開始から最初のストリーミングチャンク表示まで |
| PDFエクスポート生成 | 10秒以内 | エクスポートボタン押下からダウンロード開始まで |
| 履歴一覧表示 | 500ms以内 | 画面遷移から一覧レンダリング完了まで |

### 3.3 アクセシビリティテスト基準

| 基準 | 目標 | ツール |
|------|------|--------|
| WCAG 2.1 AA準拠 | 全ページで違反ゼロ | axe-core（@axe-core/playwright） |
| キーボード操作 | 全操作がキーボードのみで完結 | 手動テスト + Playwright |
| スクリーンリーダー | 主要フローが音声で操作可能 | 手動テスト（VoiceOver） |
| コントラスト比 | 通常テキスト 4.5:1以上、大テキスト 3:1以上 | axe-core自動チェック |
| フォーカス管理 | フォーカスインジケータが常に視認可能 | Playwright + 目視 |
| ARIA属性 | プログレスバー、タブ、モーダルに適切なARIA属性 | axe-core + 手動確認 |

---

## 4. エッジケースの洗い出し

### 4.1 入力関連

| ケース | 期待動作 | テスト方法 |
|--------|---------|-----------|
| 空文字の入力 | バリデーションエラー表示。分析は開始しない | ユニットテスト + E2E |
| 無効なURL形式（例: `not-a-url`） | バリデーションエラー表示 | ユニットテスト |
| プロトコルなしURL（例: `example.com`） | 自動的に `https://` を付与して処理、またはエラー表示 | ユニットテスト |
| 非常に長いURL（2048文字超） | 適切なエラーメッセージ表示 | ユニットテスト |
| ローカルホストURL（例: `http://localhost:3000`） | ブロックまたは警告表示（セキュリティ） | ユニットテスト |
| 内部IPアドレスURL（例: `http://192.168.1.1`） | SSRF対策としてブロック | ユニットテスト |
| 同一URLの連続分析 | 正常に処理されるか、前回結果の再利用を提案するか | E2E |
| XSS攻撃パターンを含むURL | サニタイズされ、スクリプトが実行されない | セキュリティテスト |

### 4.2 スクレイピング関連

| ケース | 期待動作 | テスト方法 |
|--------|---------|-----------|
| CORSエラー | ユーザーに適切なエラーメッセージを表示 | 統合テスト（モック） |
| robots.txtでブロック | 取得可能な情報のみで分析するか、警告を表示 | 統合テスト |
| 404/500エラーレスポンス | エラーステータスに応じた適切なメッセージ | ユニットテスト + 統合テスト |
| リダイレクトチェーン（3回以上） | 最終URLで分析。リダイレクト回数の上限設定 | 統合テスト |
| タイムアウト（30秒以上応答なし） | タイムアウトエラーを表示し、リトライ提案 | 統合テスト |
| 非常に大きなHTML（10MB超） | メモリ制限エラーの防止。サイズ上限を設けて警告 | ユニットテスト + 統合テスト |
| 文字エンコーディング問題（Shift-JIS等） | 正しくUTF-8に変換して解析 | ユニットテスト |
| JavaScript依存サイト（SPA） | フォールバック: サーバーサイドレンダリング済みHTMLで分析。取得不可の場合は警告 | 統合テスト |
| Basic認証が必要なサイト | 認証エラーを適切にハンドリング | 統合テスト |

### 4.3 AI API関連

| ケース | 期待動作 | テスト方法 |
|--------|---------|-----------|
| APIレート制限（429） | リトライキューに入れ、待機後に再実行。ユーザーに待機中であることを表示 | 統合テスト（モック） |
| APIキーの無効化・期限切れ | 明確なエラーメッセージ（「API設定を確認してください」）を表示 | 統合テスト |
| 不正なAIレスポンス（JSONパースエラー） | エラーハンドリングし、該当ペルソナの分析を「分析失敗」として表示。他のペルソナの分析は継続 | 統合テスト |
| AIレスポンスの遅延（60秒超） | タイムアウト処理し、部分的な結果を表示 | 統合テスト |
| ストリーミング途中の切断 | 受信済みデータを保持し、ユーザーに中断を通知。リトライオプションを提供 | 統合テスト |
| 16ペルソナ全て同時実行時のレート制限 | 並列実行数の制御（例: 最大3並列）。キュー管理でレート制限を回避 | 統合テスト |
| 無料枠の上限到達 | ユーザーに通知し、翌日の再試行を案内 | 統合テスト |

### 4.4 ストレージ関連

| ケース | 期待動作 | テスト方法 |
|--------|---------|-----------|
| localStorageが満杯（5MB超） | 古い履歴データの自動削除を提案。またはエラーメッセージで手動クリアを促す | ユニットテスト |
| localStorageが無効（プライベートブラウジング等） | インメモリストレージにフォールバック。セッション中のみデータ保持の旨を通知 | ユニットテスト |
| 保存データの破損（不正なJSON） | 破損データをスキップし、正常なデータのみ表示。コンソールに警告ログ | ユニットテスト |
| 複数タブでの同時操作 | データ競合の防止。StorageEventでの同期、または楽観的ロック | 統合テスト |
| ブラウザのストレージクリア | 次回アクセス時に初期状態として正常に動作 | E2E |

### 4.5 ネットワーク関連

| ケース | 期待動作 | テスト方法 |
|--------|---------|-----------|
| 分析中のネットワーク切断 | 進行中の分析を中断し、「ネットワーク接続が失われました」を表示。接続回復時にリトライ提案 | E2E |
| 低速ネットワーク（3G相当） | プログレスバーが適切に動作し、タイムアウトまでの時間を延長 | E2E（ネットワークスロットリング） |
| 断続的な接続 | 自動リトライ機構が動作し、ユーザーに状況を通知 | 統合テスト |

### 4.6 共有URL関連

| ケース | 期待動作 | テスト方法 |
|--------|---------|-----------|
| 非常に大きな分析結果のBase64エンコード | URL長が制限（約2000文字）を超える場合のフォールバック処理 | ユニットテスト |
| 改ざんされた共有URLパラメータ | デコードエラー時に適切なエラーページを表示 | ユニットテスト + E2E |
| 期限切れの共有URL（将来の永続化版） | 「このリンクは期限切れです」の表示 | E2E |

---

## 5. テストツールの提案

### 5.1 テストフレームワーク・ツールの選定

| ツール | 用途 | 選定理由 |
|--------|------|---------|
| **Vitest** | ユニットテスト・統合テスト | Next.js/TypeScriptとの高い互換性。Jestと互換のAPI。高速なテスト実行（ESM native） |
| **Playwright** | E2Eテスト | クロスブラウザ対応（Chrome/Safari/Firefox/Edge）。Next.jsとの統合が容易。要件のブラウザサポートと一致 |
| **Testing Library（@testing-library/react）** | コンポーネントテスト | ユーザー視点でのコンポーネントテスト。アクセシビリティ重視のセレクタ |
| **MSW（Mock Service Worker）** | APIモック | Gemini API・スクレイピングのモックに最適。テストレベルを問わず統一的にモック可能 |
| **@axe-core/playwright** | アクセシビリティテスト | WCAG 2.1 AA の自動検証。PlaywrightのE2Eテストと統合可能 |
| **Storybook** | UIコンポーネントカタログ | コンポーネントの視覚的テスト。デザイナーとの協業に有用（任意導入） |
| **Lighthouse CI** | パフォーマンステスト | CI/CDでのパフォーマンス回帰検出。Core Web Vitalsの自動計測 |

### 5.2 テスト環境構成

```
テスト実行環境:
  ローカル開発:
    - vitest --watch（ユニット・統合テストの常時実行）
    - playwright test（E2Eテストの手動実行）

  CI/CD（GitHub Actions）:
    - vitest run --coverage（全ユニット・統合テスト + カバレッジレポート）
    - playwright test（ヘッドレスE2Eテスト、Chrome + Firefox）
    - axe-core アクセシビリティチェック
    - Lighthouse CI パフォーマンスチェック

  ステージング:
    - 実API（Gemini 2.0 Flash）でのスモークテスト（手動）
    - 実サイトでのスクレイピング動作確認（手動）
```

### 5.3 テストディレクトリ構成案

```
src/
├── __tests__/               # ユニットテスト
│   ├── services/
│   │   ├── analysis.test.ts
│   │   ├── scraping.test.ts
│   │   └── persona.test.ts
│   ├── utils/
│   │   ├── url-validator.test.ts
│   │   ├── score-calculator.test.ts
│   │   └── export.test.ts
│   └── storage/
│       └── storage-adapter.test.ts
├── __tests__/integration/   # 統合テスト
│   ├── analysis-pipeline.test.ts
│   ├── persona-management.test.ts
│   └── export-pipeline.test.ts
├── __mocks__/               # モック定義
│   ├── fixtures/
│   │   ├── html-samples/   # HTMLフィクスチャ
│   │   └── ai-responses/   # AIレスポンスフィクスチャ
│   └── handlers/            # MSWハンドラ
│       ├── gemini.ts
│       └── scraping.ts
tests/
├── e2e/                     # E2Eテスト
│   ├── analysis-flow.spec.ts
│   ├── persona-management.spec.ts
│   ├── history.spec.ts
│   ├── export.spec.ts
│   ├── sharing.spec.ts
│   └── accessibility.spec.ts
└── fixtures/                # E2E用フィクスチャ
```

---

## 6. 抜け漏れている観点・リスク

### 6.1 要件定義に対する懸念事項

#### (A) SSRF（Server-Side Request Forgery）リスク -- 重要度: 高
- **懸念**: ユーザーが入力したURLをサーバーサイドでfetchする設計のため、内部ネットワークへのアクセスが可能になるリスクがある
- **提案**: URL入力のバリデーションにSSRF対策を盛り込むべき（プライベートIP、ループバックアドレス、メタデータエンドポイントのブロック）
- **テスト**: SSRFペイロードを用いたセキュリティテストの追加

#### (B) AIレスポンスの品質保証方法が未定義 -- 重要度: 高
- **懸念**: AIの分析結果が「専門分野に沿った内容であること」（検証方法5）とあるが、その品質基準が曖昧。AIの出力は非決定的であり、同じ入力でも異なる結果が返る
- **提案**: 以下を定義すべき
  - AIレスポンスの必須フィールド（スコア、改善提案、カテゴリ等）のスキーマバリデーション
  - レスポンスの構造的正しさのテスト（内容の正しさではなく形式の正しさ）
  - ゴールデンテスト: 既知のサイトに対するベースライン分析結果を保持し、大幅な乖離を検出

#### (C) 並列実行時のリソース管理が未定義 -- 重要度: 高
- **懸念**: 16ペルソナの並列実行は、Gemini API の無料枠（15 RPM）を即座に消費する可能性がある。また、Vercel Serverless の実行時間制限（Free: 10秒、Pro: 60秒）との整合性が不明
- **提案**:
  - 並列実行数の上限を定義すべき（例: 3並列でキュー制御）
  - Vercelの実行時間制限を考慮したタイムアウト設計が必要
  - これらの制約をテストで検証する

#### (D) 共有URL（Base64方式）のスケーラビリティ -- 重要度: 中
- **懸念**: 16ペルソナの分析結果をBase64エンコードすると、URLが数万文字になる可能性がある。ブラウザのURL長制限（実用上2000文字程度）を超える
- **提案**: 軽量版の実現可能性を再検討すべき。少なくとも以下のテストが必要
  - 最大データ量でのBase64エンコード結果のURL長テスト
  - URL長超過時のフォールバック処理のテスト

#### (E) ストリーミング表示のテスタビリティ -- 重要度: 中
- **懸念**: F-004（ストリーミング表示）のテストが難しい。SSE/WebSocketのストリーミングをテストするための設計考慮が要件定義に含まれていない
- **提案**: ストリーミングのテスト方針を設計段階で明確化すべき

#### (F) PDF生成のテスト環境 -- 重要度: 中
- **懸念**: F-005（PDFエクスポート）のPDF生成ライブラリが未選定。ライブラリによってはサーバーレス環境で動作しない可能性がある
- **提案**: PDF生成ライブラリの選定をテスト戦略と並行して行い、テスト可能性を評価すべき

#### (G) Lighthouse指標取得のテスト -- 重要度: 中
- **懸念**: F-001に「Lighthouse等のパフォーマンス指標取得」とあるが、サーバーレス環境でのLighthouse実行は困難。Google PageSpeed Insights API等の代替が必要な場合、そのモック方式も検討が必要
- **提案**: Lighthouse指標の取得方法を明確化し、テスト方針を確定すべき

#### (H) クロスブラウザの挙動差異 -- 重要度: 低
- **懸念**: 要件では Chrome/Safari/Firefox/Edge をサポートするが、localStorage の挙動やCSS描画に差異がある可能性
- **提案**: E2EテストをPlaywrightの複数ブラウザで実行し、差異を検出する

### 6.2 追加で必要なテスト観点

| 観点 | 内容 | 優先度 |
|------|------|--------|
| セキュリティテスト | SSRF、XSS、CSRF対策の検証。APIキーの漏洩防止 | 高 |
| 負荷テスト | 同時に複数ユーザーが分析を実行した場合のAPI制限への影響 | 中 |
| データプライバシー | 分析対象URLの情報がAI APIに送信される旨のユーザー同意 | 高 |
| 国際化対応の準備 | 日本語UIの文字化け・レイアウト崩れ。将来の多言語対応への備え | 低 |
| ブラウザ戻る/進むボタン | SPA内のルーティングでブラウザの履歴操作が正常に動作するか | 中 |
| SEO（サービス自体の） | メタタグ・OGP設定がサービス自体に適用されているか | 低 |
| エラーバウンダリ | React Error Boundaryによるクラッシュ防止が適切に機能するか | 中 |
| メモリリーク | 長時間使用時やストリーミング表示時のメモリリーク | 中 |

### 6.3 テスト実行の運用に関する提案

1. **CI/CDパイプラインでのゲート設定**:
   - PRマージ条件: ユニットテスト全合格 + カバレッジ80%以上 + axe-core違反ゼロ
   - デプロイ条件: 上記 + E2Eテスト全合格 + Lighthouse CI スコア閾値クリア

2. **テストデータの管理**:
   - フィクスチャHTMLは代表的な5種類以上のサイト構造を用意
   - AIレスポンスフィクスチャはペルソナごとに正常系1件 + 異常系2件を用意
   - フィクスチャの定期更新（3ヶ月ごと）を運用に含める

3. **テストの段階的導入**:
   - Phase 1: ユニットテスト + コア機能の統合テスト
   - Phase 2: E2Eテスト + アクセシビリティテスト
   - Phase 3: パフォーマンステスト + セキュリティテスト + 負荷テスト

---

## まとめ

### 最重要の設計段階での対応事項

1. **AIクライアント層の抽象化**: テスタビリティ確保のため、インターフェース定義を設計に含める
2. **ストレージ層の抽象化**: アダプターパターンの採用で、テスト・将来の移行に対応
3. **SSRF対策の設計**: URL入力バリデーションにセキュリティ層を追加
4. **並列実行制御の設計**: API制限・サーバーレス制約を考慮したキュー管理
5. **共有URL方式の再検討**: Base64方式のURL長制限問題の解決策を決定

### テスト自動化の優先順位

1. ユニットテスト（スコア算出、プロンプト生成、データ変換、バリデーション）
2. APIモック付き統合テスト（分析パイプライン全体）
3. E2Eテスト（コアユーザーシナリオ）
4. アクセシビリティテスト（axe-core自動チェック）
5. パフォーマンステスト（Lighthouse CI）
6. セキュリティテスト（SSRF、XSS）
